webpackJsonp([3],{215:function(e,t,a){a(721);var n=a(10)(a(696),a(750),null,null);n.options.__file="D:\\github\\talkingdata\\src\\views\\group\\keepuser\\keepuser.vue",n.esModule&&Object.keys(n.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] keepuser.vue: functional components are not supported with templates, they should use render functions."),e.exports=n.exports},314:function(e,t,a){a(369);var n=a(10)(a(315),a(370),null,null);n.options.__file="D:\\github\\talkingdata\\src\\views\\components\\loading.vue",n.esModule&&Object.keys(n.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] loading.vue: functional components are not supported with templates, they should use render functions."),e.exports=n.exports},315:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["height"]}},369:function(e,t){},370:function(e,t,a){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Row",[a("Col",{staticClass:"demo-spin-col",style:{height:(e.height?e.height:100)+"px"},attrs:{span:"24"}},[a("Spin",{attrs:{fix:""}},[a("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"load-c",size:"18"}}),e._v(" "),a("div",[e._v("加载中...")])],1)],1)],1)},staticRenderFns:[]},e.exports.render._withStripped=!0},695:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["tableData","isShow","dateType"],created:function(){this.columnKeys=this.tableData.columnKeys,this.columnTitles=this.tableData.columnTitles,this.columnDt=this.tableData.columnDt,this.title=this.tableData.title,this.tableShowData=this.tableData.data},mounted:function(){"week"==this.dateType?this.showColumns=this.columns.splice(0,10):"month"==this.dateType?this.showColumns=this.columns.splice(0,8):this.showColumns=this.columns},methods:{getPer:function(e){return e},TdClassName:function(e){return e=e.split("%")[0],"N/A"==e?"na-cell":e?e<10?"cell-lighter":e<20?"cell-normal":e<25?"cell-large":"cell-larger":"no-cell"},downTable:function(e){this.$refs.table.exportCsv({filename:e})}},data:function(){return{columnKeys:[],columnTitles:[],columnDt:[],title:"",showColumns:[],tableShowData:[]}},computed:{columns:function(){var e=this;return[{title:this.columnTitles[0],key:this.columnKeys[0],align:"center",render:function(t,a){return t("div",{class:"no-cell"},a.row[e.columnKeys[a.column._index]])},renderHeader:function(t,a){return t("dl",{class:"keepuser-table-columns"},[t("dt",e.columnTitles[0]),t("dd",{class:"separate"}),t("dd",e.columnDt[0])])}},{title:this.columnTitles[1],key:this.columnKeys[1],align:"center",render:function(t,a){return t("div",{class:"no-cell"},a.row[e.columnKeys[a.column._index]])},renderHeader:function(t,a){return t("dl",{class:"keepuser-table-columns"},[t("dt",e.columnTitles[1]),t("dd",{class:"separate"}),t("dd",e.columnDt[1])])}},{title:this.columnTitles[2],key:this.columnKeys[2],align:"center",render:function(t,a){return t("div",{class:e.TdClassName(a.row[e.columnKeys[a.column._index]])},e.getPer(a.row[e.columnKeys[a.column._index]]))},renderHeader:function(t,a){return t("dl",{class:"keepuser-table-columns"},[t("dt",e.columnTitles[2]),t("dd",{class:"separate"}),t("dd",e.columnDt[2])])}},{title:this.columnTitles[3],key:this.columnKeys[3],align:"center",render:function(t,a){return t("div",{class:e.TdClassName(a.row[e.columnKeys[a.column._index]])},e.getPer(a.row[e.columnKeys[a.column._index]]))},renderHeader:function(t,a){return t("dl",{class:"keepuser-table-columns"},[t("dt",e.columnTitles[3]),t("dd",{class:"separate"}),t("dd",e.columnDt[3])])}},{title:this.columnTitles[4],key:this.columnKeys[4],align:"center",render:function(t,a){return t("div",{class:e.TdClassName(a.row[e.columnKeys[a.column._index]])},e.getPer(a.row[e.columnKeys[a.column._index]]))},renderHeader:function(t,a){return t("dl",{class:"keepuser-table-columns"},[t("dt",e.columnTitles[4]),t("dd",{class:"separate"}),t("dd",e.columnDt[4])])}},{title:this.columnTitles[5],key:this.columnKeys[5],align:"center",render:function(t,a){return t("div",{class:e.TdClassName(a.row[e.columnKeys[a.column._index]])},e.getPer(a.row[e.columnKeys[a.column._index]]))},renderHeader:function(t,a){return t("dl",{class:"keepuser-table-columns"},[t("dt",e.columnTitles[5]),t("dd",{class:"separate"}),t("dd",e.columnDt[5])])}},{title:this.columnTitles[6],key:this.columnKeys[6],align:"center",render:function(t,a){return t("div",{class:e.TdClassName(a.row[e.columnKeys[a.column._index]])},e.getPer(a.row[e.columnKeys[a.column._index]]))},renderHeader:function(t,a){return t("dl",{class:"keepuser-table-columns"},[t("dt",e.columnTitles[6]),t("dd",{class:"separate"}),t("dd",e.columnDt[6])])}},{title:this.columnTitles[7],key:this.columnKeys[7],align:"center",render:function(t,a){return t("div",{class:e.TdClassName(a.row[e.columnKeys[a.column._index]])},e.getPer(a.row[e.columnKeys[a.column._index]]))},renderHeader:function(t,a){return t("dl",{class:"keepuser-table-columns"},[t("dt",e.columnTitles[7]),t("dd",{class:"separate"}),t("dd",e.columnDt[7])])}},{title:this.columnTitles[8],key:this.columnKeys[8],align:"center",render:function(t,a){return t("div",{class:e.TdClassName(a.row[e.columnKeys[a.column._index]])},e.getPer(a.row[e.columnKeys[a.column._index]]))},renderHeader:function(t,a){return t("dl",{class:"keepuser-table-columns"},[t("dt",e.columnTitles[8]),t("dd",{class:"separate"}),t("dd",e.columnDt[8])])}},{title:this.columnTitles[9],key:this.columnKeys[9],align:"center",render:function(t,a){return t("div",{class:e.TdClassName(a.row[e.columnKeys[a.column._index]])},e.getPer(a.row[e.columnKeys[a.column._index]]))},renderHeader:function(t,a){return t("dl",{class:"keepuser-table-columns"},[t("dt",e.columnTitles[9]),t("dd",{class:"separate"}),t("dd",e.columnDt[9])])}},{title:this.columnTitles[10],key:this.columnKeys[10],align:"center",render:function(t,a){return t("div",{class:e.TdClassName(a.row[e.columnKeys[a.column._index]])},e.getPer(a.row[e.columnKeys[a.column._index]]))},renderHeader:function(t,a){return t("dl",{class:"keepuser-table-columns"},[t("dt",e.columnTitles[10]),t("dd",{class:"separate"}),t("dd",e.columnDt[10])])}}]}}}},696:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(38),l=n(s),r=a(36),o=n(r),i=a(5),c=n(i),u=a(735),d=n(u),m=a(314),p=n(m);t.default={components:{keepuserTable:d.default,loading:p.default},data:function(){return{tabName:"newDevice",dateType:"day",currentType:"newDeviceDay",isShowLoading:!0,table1:{},table2:{},table3:{},table4:{},table5:{},table6:{}}},created:function(){this.$store.commit("showRightFilter",{isShow:!0}),this.$store.commit("channelShow",{isShow:!0}),this.getData()},computed:{checkedData:function(){return this.$store.state.app.checkedPlatform},isFiltersHandle:function(){return this.$store.state.app.isFiltersHandle},startDate:function(){return this.$store.state.app.startDate},endDate:function(){return this.$store.state.app.endDate},checkedChannel:function(){return this.$store.state.app.checkedChannel},checkedVersion:function(){return this.$store.state.app.checkedVersion},isChangeDate:function(){return this.$store.state.app.isChangeDate},checkedAccesskey:function(){return this.$store.state.app.checkedAccesskey}},watch:{isFiltersHandle:function(){this.filterData()},isChangeDate:function(){this.filterData()}},methods:{filterData:function(){this.table1={},this.table2={},this.table3={},this.table4={},this.table5={},this.table6={},this.getData()},isEmptyObject:function(e){return c.default.isEmptyObject(e)},changeTypeTab:function(e){this.tabName=e,this.getData()},changeDayTab:function(e){this.dateType=e,this.getData()},getAjaxData:function(){var e=this;return(0,o.default)(l.default.mark(function t(){var a,n,s,r,o,i;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={accesskey:e.checkedAccesskey,appVersion:e.checkedVersion,channel:e.checkedChannel,beginDate:e.startDate,endDate:e.endDate,platform:e.checkedData,groupBy:e.dateType,metric:e.tabName},n={},t.next=3,e.$getData("https://easy-mock.com/mock/5a9a40acfdc65f3e22abbdee/tk/retention",a,"post");case 3:if(s=t.sent,"-4"!=s.data.code){t.next=7;break}return e.$Message.warning({content:"数据错误,请稍候再试！",duration:3}),t.abrupt("return");case 7:r=s.data.data.responses[0],o=[];for(i in r)o.push(i);return n.columnKeys=o,n.data=s.data.data.responses,n.columnDt=["有效均值"].concat(s.data.data.statisticalData),t.abrupt("return",n);case 13:case"end":return t.stop()}},t,e)}))()},getData:function(){var e=this;return(0,o.default)(l.default.mark(function t(){var a,n,s,r,o,i;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("newDevice"!=e.tabName){t.next=45;break}t.t0=e.dateType,t.next="day"===t.t0?4:"week"===t.t0?17:"month"===t.t0?30:43;break;case 4:if(e.isEmptyObject(e.table1)){t.next=6;break}return t.abrupt("return");case 6:return e.isShowLoading=!0,t.next=9,e.getAjaxData();case 9:return a=t.sent,e.table1.data=a.data,e.table1.columnKeys=a.columnKeys,e.table1.columnDt=a.columnDt,e.table1.title="+N日留存率",e.table1.columnTitles=["日期","用户数","+1日","+2日","+3日","+4日","+5日","+6日","+7日","+14日","+30日"],e.isShowLoading=!1,t.abrupt("break",43);case 17:if(e.isEmptyObject(e.table2)){t.next=19;break}return t.abrupt("return");case 19:return e.isShowLoading=!0,t.next=22,e.getAjaxData();case 22:return n=t.sent,e.table2.data=n.data,e.table2.columnKeys=n.columnKeys,e.table2.columnDt=n.columnDt,e.table2.title="+N周留存率",e.table2.columnTitles=["日期","用户数","+1周","+2周","+3周","+4周","+5周","+6周","+7周","+8周"],e.isShowLoading=!1,t.abrupt("break",43);case 30:if(e.isEmptyObject(e.table3)){t.next=32;break}return t.abrupt("return");case 32:return e.isShowLoading=!0,t.next=35,e.getAjaxData();case 35:return s=t.sent,e.table3.data=s.data,e.table3.columnKeys=s.columnKeys,e.table3.columnDt=s.columnDt,e.table3.title="+N月留存率",e.table3.columnTitles=["日期","用户数","+1月","+2月","+3月","+4月","+5月","+6月"],e.isShowLoading=!1,t.abrupt("break",43);case 43:t.next=88;break;case 45:t.t1=e.dateType,t.next="day"===t.t1?48:"week"===t.t1?62:"month"===t.t1?75:88;break;case 48:if(e.isEmptyObject(e.table4)){t.next=50;break}return t.abrupt("return");case 50:return e.isShowLoading=!0,t.next=53,e.getAjaxData();case 53:return r=t.sent,e.table4.data=r.data,e.table4.columnKeys=r.columnKeys,e.table4.columnDt=r.columnDt,e.table4.title="+N日留存率",e.table4.columnTitles=["日期","用户数","+1日","+2日","+3日","+4日","+5日","+6日","+7日","+14日","+30日"],e.table4.columnDt=["有效均值","9","18.4%","11.3%","12.6%","9.5%","9.7%","6.7%","5.7%","5.3%","6%"],e.isShowLoading=!1,t.abrupt("break",88);case 62:if(e.isEmptyObject(e.table5)){t.next=64;break}return t.abrupt("return");case 64:return e.isShowLoading=!0,t.next=67,e.getAjaxData();case 67:return o=t.sent,e.table5.data=o.data,e.table5.columnKeys=o.columnKeys,e.table5.columnDt=o.columnDt,e.table5.title="+N周留存率",e.table5.columnTitles=["日期","用户数","+1周","+2周","+3周","+4周","+5周","+6周","+7周","+8周"],e.isShowLoading=!1,t.abrupt("break",88);case 75:if(e.isEmptyObject(e.table6)){t.next=77;break}return t.abrupt("return");case 77:return e.isShowLoading=!0,t.next=80,e.getAjaxData();case 80:return i=t.sent,e.table6.data=i.data,e.table6.columnKeys=i.columnKeys,e.table6.columnDt=i.columnDt,e.table6.title="+N月留存率",e.table6.columnTitles=["日期","用户数","+1月","+2月","+3月","+4月","+5月","+6月"],e.isShowLoading=!1,t.abrupt("break",88);case 88:case"end":return t.stop()}},t,e)}))()},downTable:function(){var e=this.startDate+"_"+this.endDate+"_"+this.checkedData;if("newDevice"==this.tabName){switch(this.dateType){case"day":this.$refs.newDeviceDay.downTable("新增设备留存_+N日_"+e);break;case"week":this.$refs.newDeviceWeek.downTable("新增设备留存_+N周_"+e);break;case"month":this.$refs.newDeviceMonth.downTable("新增设备留存_+N月_"+e)}}else{switch(this.dateType){case"day":this.$refs.startNumDay.downTable("活跃设备留存_+N日_"+e);break;case"week":this.$refs.startNumWeek.downTable("活跃设备留存_+N周_"+e);break;case"month":this.$refs.startNumMonth.downTable("活跃设备留存_+N月_"+e)}}}}}},721:function(e,t){},723:function(e,t){},735:function(e,t,a){a(723);var n=a(10)(a(695),a(753),"data-v-77531838",null);n.options.__file="D:\\github\\talkingdata\\src\\views\\group\\keepuser\\components\\keepuser-table.vue",n.esModule&&Object.keys(n.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] keepuser-table.vue: functional components are not supported with templates, they should use render functions."),e.exports=n.exports},750:function(e,t,a){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"keepuser-wrap"},[e._m(0),e._v(" "),a("div",{staticStyle:{position:"relative"}},[a("div",{staticClass:"keepuser-daytype"},[a("Button",{class:"day"==e.dateType?"active":"",attrs:{type:"ghost",shape:"circle",size:"small"},nativeOn:{click:function(t){e.changeDayTab("day")}}},[e._v("日")]),e._v(" "),a("Button",{class:"week"==e.dateType?"active":"",attrs:{type:"ghost",shape:"circle",size:"small"},nativeOn:{click:function(t){e.changeDayTab("week")}}},[e._v("周")]),e._v(" "),a("Button",{class:"month"==e.dateType?"active":"",attrs:{type:"ghost",shape:"circle",size:"small"},nativeOn:{click:function(t){e.changeDayTab("month")}}},[e._v("月")]),e._v(" "),a("Icon",{staticClass:"fontS18 keepuser-daytype-icon",attrs:{type:"ios-download-outline"},nativeOn:{click:function(t){e.downTable(t)}}}),e._v(" "),a("Poptip",{attrs:{trigger:"hover",placement:"bottom-end"}},[a("Button",{staticClass:"downTable",attrs:{type:"text"}},[a("Icon",{staticClass:"fontS18",attrs:{type:"ios-help-outline"}})],1),e._v(" "),a("div",{attrs:{slot:"title"},slot:"title"},[e._v("数据指标说明")]),e._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[a("span",[e._v("新增设备留存率")]),e._v(": 所选日期内的新增设备，在之后指定时间内还在使用应用的比例。\n                    ")]),e._v(" "),a("p",{staticClass:"bg"},[a("span",[e._v("活跃设备留存率")]),e._v(": 所选日期内的活跃设备，在之后指定时间内还在使用应用的比例。\n                    ")]),e._v(" "),a("p",[a("span",[e._v("N日留存率")]),e._v(": 某日新增（或活跃）设备在之后第N日使用过应用的设备比例。某日新增（或活跃）后第N日使用过应用的设备/该日新增（或活跃）设备。无特殊说明时，一般均指新增设备活跃率。\n                    ")]),e._v(" "),a("p",{staticClass:"bg"},[a("span",[e._v("N周留存率")]),e._v(": 某自然周新增设备，在该周后第N个自然周使用过应用的设备比例。该周后第N个自然周使用过应用的设备/该周新增设备。\n                    ")]),e._v(" "),a("p",[a("span",[e._v("N月留存率")]),e._v(": 某自然月新增设备，在该月后第N个自然月使用过应用的设备比例。该自然月后第N个自然月中使用过应用的设备/该自然月新增设备。\n                    ")]),e._v(" "),a("p",{staticClass:"bg"},[a("span",[e._v("有效均值")]),e._v(": 判断+n是否是未来日期或没有完全结束的日期，是的话不参与计算。\n                    ")])])],1)],1),e._v(" "),a("Tabs",{attrs:{value:"newDevice",animated:!1},on:{"on-click":e.changeTypeTab}},[e.isShowLoading?a("loading",{attrs:{height:300}}):e._e(),e._v(" "),a("TabPane",{attrs:{label:"新增设备留存",name:"newDevice"}},[e.isEmptyObject(e.table1)?e._e():a("keepuserTable",{ref:"newDeviceDay",attrs:{isShow:"day"==e.dateType,dateType:"day",tableData:e.table1}}),e._v(" "),e.isEmptyObject(e.table2)?e._e():a("keepuserTable",{ref:"newDeviceWeek",attrs:{isShow:"week"==e.dateType,dateType:"week",tableData:e.table2}}),e._v(" "),e.isEmptyObject(e.table3)?e._e():a("keepuserTable",{ref:"newDeviceMonth",attrs:{isShow:"month"==e.dateType,dateType:"month",tableData:e.table3}})],1),e._v(" "),a("TabPane",{attrs:{label:"活跃设备留存",name:"activeDevice"}},[e.isEmptyObject(e.table4)?e._e():a("keepuserTable",{ref:"startNumDay",attrs:{isShow:"day"==e.dateType,dateType:"day",tableData:e.table4}}),e._v(" "),e.isEmptyObject(e.table5)?e._e():a("keepuserTable",{ref:"startNumWeek",attrs:{isShow:"week"==e.dateType,dateType:"week",tableData:e.table5}}),e._v(" "),e.isEmptyObject(e.table6)?e._e():a("keepuserTable",{ref:"startNumMonth",attrs:{isShow:"month"==e.dateType,dateType:"month",tableData:e.table6}})],1)],1)],1)])},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"overview"},[a("h1",[e._v("留存分析")])])}]},e.exports.render._withStripped=!0},753:function(e,t,a){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}]},[a("div",{staticClass:"keepuser-title"},[e._v(e._s(e.title))]),e._v(" "),e.tableData?a("Table",{ref:"table",staticClass:"keepuser-table",attrs:{columns:e.showColumns,data:e.tableShowData}}):e._e()],1)},staticRenderFns:[]},e.exports.render._withStripped=!0}});